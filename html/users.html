<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link href="../css/usersStyle.css" rel="stylesheet" type="text/css"/>
    <meta charset="utf-8">
    <title>Agendamentos Apae</title>
    <meta name="author" content="Nick Kuerten Da Silva">
    <meta name="description" content="Site de agendamentos para a Apae">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
    <link href="../img/logoColor.png" rel="shortcut icon" type="image/">
</head>
<body>
    
    <header class="header">
        <div class="logo">
            <img src="../imgs/logoWhite.png" alt="logo Apae">
            <span class="apae">APAE</span>
        </div>
        <div class="icons">
            <a href="index.html"><img src="../imgs/agenda.png" alt="acesso a agenda"></a>            
            <div class="dropdown">
                <img src="../imgs/people.png" alt="acesso aos usuários" class="people">
                <div class="dropdown-content">
                    <a href="professionals.html">Profissionais</a>
                    <a href="students.html">Estudantes</a>
                    <a href="users.html">Usuários</a>
                </div>
            </div>
            <img src="../imgs/user.png" alt="user">
        </div>
        <div class="swagger-link">
            <a href="/swagger/index.html">Documentação API</a>
        </div>
    </header>

    <div class="container-usuarios">
        <h2>Usuários</h2>
        <div class="section" id="section-a"><div class="section-title">A.</div><div class="user-list" id="user-list-a"></div></div>
        <div class="section" id="section-b"><div class="section-title">B.</div><div class="user-list" id="user-list-b"></div></div>
        <div class="section" id="section-c"><div class="section-title">C.</div><div class="user-list" id="user-list-c"></div></div>
        <div class="section" id="section-d"><div class="section-title">D.</div><div class="user-list" id="user-list-d"></div></div>
        <div class="section" id="section-e"><div class="section-title">E.</div><div class="user-list" id="user-list-e"></div></div>
        <div class="section" id="section-f"><div class="section-title">F.</div><div class="user-list" id="user-list-f"></div></div>
        <div class="section" id="section-g"><div class="section-title">G.</div><div class="user-list" id="user-list-g"></div></div>
        <div class="section" id="section-h"><div class="section-title">H.</div><div class="user-list" id="user-list-h"></div></div>
        <div class="section" id="section-i"><div class="section-title">I.</div><div class="user-list" id="user-list-i"></div></div>
        <div class="section" id="section-j"><div class="section-title">J.</div><div class="user-list" id="user-list-j"></div></div>
        <div class="section" id="section-k"><div class="section-title">K.</div><div class="user-list" id="user-list-k"></div></div>
        <div class="section" id="section-l"><div class="section-title">L.</div><div class="user-list" id="user-list-l"></div></div>
        <div class="section" id="section-m"><div class="section-title">M.</div><div class="user-list" id="user-list-m"></div></div>
        <div class="section" id="section-n"><div class="section-title">N.</div><div class="user-list" id="user-list-n"></div></div>
        <div class="section" id="section-o"><div class="section-title">O.</div><div class="user-list" id="user-list-o"></div></div>
        <div class="section" id="section-p"><div class="section-title">P.</div><div class="user-list" id="user-list-p"></div></div>
        <div class="section" id="section-q"><div class="section-title">Q.</div><div class="user-list" id="user-list-q"></div></div>
        <div class="section" id="section-r"><div class="section-title">R.</div><div class="user-list" id="user-list-r"></div></div>
        <div class="section" id="section-s"><div class="section-title">S.</div><div class="user-list" id="user-list-s"></div></div>
        <div class="section" id="section-t"><div class="section-title">T.</div><div class="user-list" id="user-list-t"></div></div>
        <div class="section" id="section-u"><div class="section-title">U.</div><div class="user-list" id="user-list-u"></div></div>
        <div class="section" id="section-v"><div class="section-title">V.</div><div class="user-list" id="user-list-v"></div></div>
        <div class="section" id="section-w"><div class="section-title">W.</div><div class="user-list" id="user-list-w"></div></div>
        <div class="section" id="section-x"><div class="section-title">X.</div><div class="user-list" id="user-list-x"></div></div>
        <div class="section" id="section-y"><div class="section-title">Y.</div><div class="user-list" id="user-list-y"></div></div>
        <div class="section" id="section-z"><div class="section-title">Z.</div><div class="user-list" id="user-list-z"></div></div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch('/api/usuarios') 
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    const sections = {
                        'A': document.getElementById('user-list-a'),
                        'B': document.getElementById('user-list-b'),
                        'C': document.getElementById('user-list-c'),
                        'D': document.getElementById('user-list-d'),
                        'E': document.getElementById('user-list-e'),
                        'F': document.getElementById('user-list-f'),
                        'G': document.getElementById('user-list-g'),
                        'H': document.getElementById('user-list-h'),
                        'I': document.getElementById('user-list-i'),
                        'J': document.getElementById('user-list-j'),
                        'K': document.getElementById('user-list-k'),
                        'L': document.getElementById('user-list-l'),
                        'M': document.getElementById('user-list-m'),
                        'N': document.getElementById('user-list-n'),
                        'O': document.getElementById('user-list-o'),
                        'P': document.getElementById('user-list-p'),
                        'Q': document.getElementById('user-list-q'),
                        'R': document.getElementById('user-list-r'),
                        'S': document.getElementById('user-list-s'),
                        'T': document.getElementById('user-list-t'),
                        'U': document.getElementById('user-list-u'),
                        'V': document.getElementById('user-list-v'),
                        'W': document.getElementById('user-list-w'),
                        'X': document.getElementById('user-list-x'),
                        'Y': document.getElementById('user-list-y'),
                        'Z': document.getElementById('user-list-z')
                    };

                    Object.values(sections).forEach(section => {
                        section.innerHTML = '';
                    });

                    data.forEach(user => {
                        const firstLetter = user.name.charAt(0).toUpperCase();
                        if (sections[firstLetter]) {
                            const userItem = document.createElement('div');
                            userItem.classList.add('user-item');
                            userItem.textContent = user.name; 
                            sections[firstLetter].appendChild(userItem); 
                        }
                    });
                })
                .catch(error => console.error('Erro ao buscar usuários:', error));
        });
    </script>
</body>
</html>
